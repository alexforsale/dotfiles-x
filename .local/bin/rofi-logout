#!/usr/bin/env bash

case ${_WM} in
    openbox)
        question=$(echo " lock| logout| reboot| shutdown" | rofi -sep "|" \
            -dmenu -i -p 'System: ' "" \
            -hide-scrollbar \
            -eh 1 \
            -width 25 \
            -line-padding 10 \
            -padding 20 \
            -lines 4 \
            -location 3 \
            -xoffset 0 -yoffset 30 \
            -font "Fantasque Sans Mono 10" \
            -color-enabled true)
        ;;
    i3)
        question=$(echo " lock| logout| reboot| shutdown" | rofi -sep "|" \
            -dmenu -i -p 'System: ' "" \
            -hide-scrollbar \
            -eh 1 \
            -width 25 \
            -line-padding 10 \
            -padding 20 \
            -lines 4 \
            -location 5 \
            -xoffset 0 -yoffset -39 \
            -font "Fantasque Sans Mono 10" \
            -color-enabled true)
        ;;
esac

case $question in
    *lock)
        if [ "$(pgrep -x lightdm)" ] && [ "$(command -v light-locker)" ]; then
            light-locker-command -l
        fi
        ;;
    *logout)
        case ${_WM} in
            openbox)
                openbox --exit
                ;;
            i3)
                i3-msg exit
                ;;
        esac
        ;;
    *reboot)
        shutdown -r now
        ;;
    *shutdown)
        poweroff
        ;;
    *)
        exit 0  # do nothing on wrong response
        ;;
esac
